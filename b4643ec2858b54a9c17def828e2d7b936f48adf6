{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "df277747_7a95d877",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2026-02-23T18:00:32Z",
      "side": 1,
      "message": "Nit, lets maybe say something like \"to /\"\n\n\n\"correctly\" doesn\u0027t make clear what\u0027s going on.",
      "range": {
        "startLine": 7,
        "startChar": 30,
        "endLine": 7,
        "endChar": 39
      },
      "revId": "b4643ec2858b54a9c17def828e2d7b936f48adf6",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7e7460ea_97534106",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2026-02-24T01:53:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "df277747_7a95d877",
      "range": {
        "startLine": 7,
        "startChar": 30,
        "endLine": 7,
        "endChar": 39
      },
      "revId": "b4643ec2858b54a9c17def828e2d7b936f48adf6",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "002d85c8_5fe36930",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2026-02-23T17:59:44Z",
      "side": 1,
      "message": "This behavior was somewhat on purpose.  A default constructed object_path basically shouldn\u0027t be used, but was required in the context of unpacking.\n\nDo you have an example of where this would be used in code?",
      "revId": "b4643ec2858b54a9c17def828e2d7b936f48adf6",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "82ccf63c_003fd733",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2026-02-24T01:53:02Z",
      "side": 1,
      "message": "\u003e A default constructed object_path basically shouldn\u0027t be used\n\nWell, it is used multiple times in bmcweb\n```\n rg -i \"sdbusplus::message::object_path .*Path;\"\nfeatures/openbmc_rest/image_upload.hpp\n81:            sdbusplus::message::object_path path;\n\nredfish-core/src/dbus_log_watcher.cpp\n79:    sdbusplus::message::object_path objectPath;\n\nredfish-core/include/utils/systems_utils.hpp\n151:    sdbusplus::message::object_path systemPath;\n\nredfish-core/lib/update_service.hpp\n272:    sdbusplus::message::object_path objPath;\n421:    sdbusplus::message::object_path objPath;\n\nredfish-core/lib/certificate_service.hpp\n573:    sdbusplus::message::object_path objectPath;\n891:            sdbusplus::message::object_path csrObjectPath;\n```\n\n\u003e but was required in the context of unpacking.\n\nBut that\u0027s what friend classes/methods are for, right? \n\nCurrently that intent of \"shouldn\u0027t be used\" does not look like it\u0027s even documented.\n\nAnyways, can you explain why it is required for unpacking? I\u0027m not completely following why it can\u0027t be done some other way.\n\nThere\u0027s also a number of cases where the root path is explicitly constructed.\n```\nredfish-core/lib/hypervisor_system.hpp\n331:    sdbusplus::message::object_path path(\"/\");\nredfish-core/lib/sensors.hpp\n1190:    sdbusplus::message::object_path path(\"/\");\n```\n\nIn both cases, default-constructing with `\"/\"` would be either safer or less verbose (but in unpacking cases, create some extra overhead).\n\n\nFor the unpacking use-case, could it be more appropriate to directly create the correct object path instead of creating an invalid one and then modifying it at some later point? That robs us of the ability to make it `const`, creating readability problems in bmcweb code (mutable object path which is never modified after unpacking).\n\n\u003e Do you have an example of where this would be used in code?\n\nYes, you can have a look at reactors with generated servers. Rarely they will have interfaces which have a property of type object path. If the default constructor is wrong for object path is wrong then these will throw unless the properties are initialized.\n\nThat makes using the (a)server unnecessarily bug prone and *inconsistent* (some interfaces can default-construct, others cannot).",
      "parentUuid": "002d85c8_5fe36930",
      "revId": "b4643ec2858b54a9c17def828e2d7b936f48adf6",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d3a15d3d_bbb3f13b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2026-02-24T20:44:37Z",
      "side": 1,
      "message": "\u003e \u003e A default constructed object_path basically shouldn\u0027t be used\n\u003e \n\u003e Well, it is used multiple times in bmcweb\n\u003e ```\n\u003e  rg -i \"sdbusplus::message::object_path .*Path;\"\n\u003e features/openbmc_rest/image_upload.hpp\n\u003e 81:            sdbusplus::message::object_path path;\n\u003e \n\u003e redfish-core/src/dbus_log_watcher.cpp\n\u003e 79:    sdbusplus::message::object_path objectPath;\n\u003e \n\u003e redfish-core/include/utils/systems_utils.hpp\n\u003e 151:    sdbusplus::message::object_path systemPath;\n\u003e \n\u003e redfish-core/lib/update_service.hpp\n\u003e 272:    sdbusplus::message::object_path objPath;\n\u003e 421:    sdbusplus::message::object_path objPath;\n\u003e \n\u003e redfish-core/lib/certificate_service.hpp\n\u003e 573:    sdbusplus::message::object_path objectPath;\n\u003e 891:            sdbusplus::message::object_path csrObjectPath;\n\u003e ```\n\u003e \n\u003e \u003e but was required in the context of unpacking.\n\u003e \n\u003e But that\u0027s what friend classes/methods are for, right? \n\u003e \n\u003e Currently that intent of \"shouldn\u0027t be used\" does not look like it\u0027s even documented.\n\u003e \n\u003e Anyways, can you explain why it is required for unpacking? I\u0027m not completely following why it can\u0027t be done some other way.\n\nYou found a couple of examples in bmcweb of why, lets take your first one in your list:\nhttps://github.com/openbmc/bmcweb/blob/8f04d1710bb90a9dd225ce9b82cb0c157460b4a4/features/openbmc_rest/image_upload.hpp#L81\n\nYou\u0027ll note you have to default construct the object_path so that you can pass it to the read(...) call.  If you use that path object without having called a successful read() on it, the object is invalid.\n\n\u003e \n\u003e There\u0027s also a number of cases where the root path is explicitly constructed.\n\u003e ```\n\u003e redfish-core/lib/hypervisor_system.hpp\n\u003e 331:    sdbusplus::message::object_path path(\"/\");\n\u003e redfish-core/lib/sensors.hpp\n\u003e 1190:    sdbusplus::message::object_path path(\"/\");\n\u003e ```\n\u003e \n\u003e In both cases, default-constructing with `\"/\"` would be either safer or less verbose (but in unpacking cases, create some extra overhead).\n\nI actually prefer the verbosity there.  It makes it VERY clear at the call site what path is being put in. FWIW, the hypervisor_system.hpp example is something we wouldn\u0027t even recommend anymore.  Generally we put object managers on a namespace, not the root, but that code is old and hasn\u0027t kept up with best practices.\n\nThe code in sensors.hpp is actually an antipattern now that the mapper has association calls, but that code you\u0027re pointing to has existed for 7 years.\nBut that\u0027s kind of the point, there\u0027s no correct usage off the top of my head where you should be relying on a default constructed path of \"/\", so making it the default isn\u0027t great.\n\n\u003e \n\u003e \n\u003e For the unpacking use-case, could it be more appropriate to directly create the correct object path instead of creating an invalid one and then modifying it at some later point? That robs us of the ability to make it `const`, creating readability problems in bmcweb code (mutable object path which is never modified after unpacking).\n\nI don\u0027t understand what you\u0027re suggesting about const here.  FWIW, for new usage, Patrick put in the unpack\u003c\u003e methods which in theory don\u0027t require default construction (or could use friend classes like you suggest).  IF we\u0027re going to refactor, I\u0027d rather we continue pushing those out rather than try to make object_path default construct.\n\n\u003e \n\u003e \u003e Do you have an example of where this would be used in code?\n\u003e \n\u003e Yes, you can have a look at reactors with generated servers. Rarely they will have interfaces which have a property of type object path. If the default constructor is wrong for object path is wrong then these will throw unless the properties are initialized.\n\nI\u0027m not seeing it, can you give me a pointer to the code you\u0027re talking about?  I would expect every property to be explicitly initialized to something sane for that interface, not relying on the underlying object_path object to do something reasonable.\n\n\u003e \n\u003e That makes using the (a)server unnecessarily bug prone and *inconsistent* (some interfaces can default-construct, others cannot).\n\nI think we can solve this net-issue in a different way.  Ideally the above should be in your commit message describing why this change should go through.\n\nFrom my perspective, I would rather we prioritize getting everything using the unpack() calls, and deprecate the default constructor entirely rather than try to improve it.  FWIW, I can\u0027t really think of a case where a property pointing at \"/\" is correct behavior either, so in that case we\u0027ve moved from a startup bug to a runtime bug?",
      "parentUuid": "82ccf63c_003fd733",
      "revId": "b4643ec2858b54a9c17def828e2d7b936f48adf6",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f6d33f41_f2d6a412",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2026-02-25T01:33:18Z",
      "side": 1,
      "message": "\u003e I would expect every property to be explicitly initialized to something\n sane for that interface, not relying on the underlying object_path \nobject to do something reasonable.\n\nThere is a constructor for generated server which does not take properties. If you were right, we would not have that constructor?\n\nIndependently of the developer, IMO sdbusplus needs to make a best effort to not break D-Bus by creating invalid values for object path.\n\n\u003e FWIW, I can\u0027t really think of a case where a property pointing at \"/\" is\n correct behavior either\n\n`/` could be used to indicate absence of a value, so there is a use-case for it. \nUsing special values to represent optional is widely used in the PDI.\nIt depends on the interface and what it needs to represent.\n\n\u003e so in that case we\u0027ve moved from a startup bug\n to a runtime bug?\n\nD-Bus interfaces are not only created at startup, they can be created at any point in time. IMO it is preferable to not throw and terminate as a default behavior.\n\n\u003e and deprecate the default constructor entirely rather than try to improve it.  \n\nThat idea creates lots of edge cases in the mako cpp and python code for the generated headers.\n\nI estimate it would be a large amount of work to implement your idea since then default construction of some interfaces via generated server will not be possible anymore. The generated code and the code to generate it is already quite complicated so i would try to avoid going down that route.",
      "parentUuid": "d3a15d3d_bbb3f13b",
      "revId": "b4643ec2858b54a9c17def828e2d7b936f48adf6",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}